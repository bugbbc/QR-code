<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>å›¾ç‰‡è½¬Base64å·¥å…·</title>
    <style>
      * {
        box-sizing: border-box;
      }
      body {
        margin: 0;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          sans-serif;
        background: #f5f5f5;
        padding: 20px;
      }
      .container {
        max-width: 800px;
        margin: 0 auto;
        background: white;
        border-radius: 12px;
        padding: 24px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }
      h1 {
        margin-top: 0;
        color: #333;
      }
      .upload-area {
        border: 2px dashed #ddd;
        border-radius: 8px;
        padding: 40px;
        text-align: center;
        margin: 20px 0;
        cursor: pointer;
        transition: all 0.3s;
      }
      .upload-area:hover {
        border-color: #0b72ff;
        background: #f0f7ff;
      }
      .upload-area.dragover {
        border-color: #0b72ff;
        background: #e6f2ff;
      }
      input[type="file"] {
        display: none;
      }
      .image-list {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        gap: 16px;
        margin-top: 20px;
      }
      .image-item {
        border: 1px solid #ddd;
        border-radius: 8px;
        padding: 12px;
        background: #fafafa;
      }
      .image-item img {
        width: 100%;
        height: 150px;
        object-fit: contain;
        background: white;
        border-radius: 4px;
        margin-bottom: 8px;
      }
      .image-item .name {
        font-size: 12px;
        color: #666;
        word-break: break-all;
        margin-bottom: 8px;
      }
      .image-item .size {
        font-size: 11px;
        color: #999;
        margin-bottom: 8px;
      }
      .image-item button {
        width: 100%;
        padding: 6px;
        background: #0b72ff;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 12px;
      }
      .image-item button:hover {
        background: #0056d6;
      }
      .instructions {
        background: #fff3cd;
        border-left: 4px solid #ffc107;
        padding: 16px;
        margin: 20px 0;
        border-radius: 4px;
      }
      .instructions h3 {
        margin-top: 0;
        color: #856404;
      }
      .instructions ol {
        margin: 8px 0;
        padding-left: 20px;
      }
      .instructions li {
        margin: 4px 0;
        color: #856404;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>å›¾ç‰‡è½¬Base64å·¥å…·</h1>
      <p>å°†å›¾ç‰‡æ–‡ä»¶è½¬æ¢ä¸ºBase64ç¼–ç ï¼Œç”¨äºç¦»çº¿äºŒç»´ç ç”Ÿæˆã€‚</p>

      <div class="instructions">
        <h3>ä½¿ç”¨è¯´æ˜ï¼š</h3>
        <ol>
          <li>
            ä¸Šä¼ figureç›®å½•ä¸‹çš„å›¾ç‰‡æ–‡ä»¶ï¼ˆup_1.jpg ~ up_7.jpg, down_1.jpg ~
            down_6.jpgï¼‰
          </li>
          <li>ç‚¹å‡»"å¤åˆ¶Base64"æŒ‰é’®å¤åˆ¶æ¯å¼ å›¾ç‰‡çš„Base64ç¼–ç </li>
          <li>
            åœ¨åå°ç®¡ç†é¡µé¢çš„"ç¦»çº¿äºŒç»´ç ç”Ÿæˆ"åŠŸèƒ½ä¸­ï¼Œä½¿ç”¨ä¸Šä¼ åŠŸèƒ½ç›´æ¥ä¸Šä¼ å›¾ç‰‡
          </li>
          <li>æˆ–è€…æ‰‹åŠ¨å°†Base64ç¼–ç ä¿å­˜ï¼Œç”¨äºåç»­ä½¿ç”¨</li>
        </ol>
        <p>
          <strong>æç¤ºï¼š</strong
          >å»ºè®®åœ¨ä¸Šä¼ å‰å‹ç¼©å›¾ç‰‡ï¼Œä»¥å‡å°äºŒç»´ç å¤§å°ã€‚æ¨èä½¿ç”¨JPEGæ ¼å¼ï¼Œè´¨é‡è®¾ç½®ä¸º70-80%ã€‚
        </p>
      </div>

      <div class="upload-area" id="upload-area">
        <p>ğŸ“ ç‚¹å‡»æˆ–æ‹–æ‹½å›¾ç‰‡æ–‡ä»¶åˆ°æ­¤å¤„</p>
        <p style="font-size: 12px; color: #999">
          æ”¯æŒå¤šé€‰ï¼Œå»ºè®®ä¸Šä¼ figureç›®å½•ä¸‹çš„å›¾ç‰‡
        </p>
      </div>
      <input type="file" id="file-input" accept="image/*" multiple />

      <div class="image-list" id="image-list"></div>
    </div>

    <script>
      const uploadArea = document.getElementById("upload-area");
      const fileInput = document.getElementById("file-input");
      const imageList = document.getElementById("image-list");
      const images = {};

      uploadArea.addEventListener("click", () => fileInput.click());
      uploadArea.addEventListener("dragover", (e) => {
        e.preventDefault();
        uploadArea.classList.add("dragover");
      });
      uploadArea.addEventListener("dragleave", () => {
        uploadArea.classList.remove("dragover");
      });
      uploadArea.addEventListener("drop", (e) => {
        e.preventDefault();
        uploadArea.classList.remove("dragover");
        handleFiles(Array.from(e.dataTransfer.files));
      });
      fileInput.addEventListener("change", (e) => {
        handleFiles(Array.from(e.target.files));
      });

      function handleFiles(files) {
        files.forEach((file) => {
          if (!file.type.startsWith("image/")) {
            alert(`${file.name} ä¸æ˜¯å›¾ç‰‡æ–‡ä»¶`);
            return;
          }
          const reader = new FileReader();
          reader.onload = (e) => {
            images[file.name] = {
              name: file.name,
              base64: e.target.result,
              size: file.size,
            };
            renderImages();
          };
          reader.readAsDataURL(file);
        });
      }

      function renderImages() {
        imageList.innerHTML = "";
        Object.values(images).forEach((img) => {
          const item = document.createElement("div");
          item.className = "image-item";
          item.innerHTML = `
          <img src="${img.base64}" alt="${img.name}" />
          <div class="name">${img.name}</div>
          <div class="size">${formatBytes(img.size)}</div>
          <button onclick="copyBase64('${img.name}')">å¤åˆ¶Base64</button>
        `;
          imageList.appendChild(item);
        });
      }

      function copyBase64(name) {
        const base64 = images[name].base64;
        navigator.clipboard
          .writeText(base64)
          .then(() => {
            alert(`å·²å¤åˆ¶ ${name} çš„Base64ç¼–ç åˆ°å‰ªè´´æ¿`);
          })
          .catch(() => {
            // é™çº§æ–¹æ¡ˆ
            const textarea = document.createElement("textarea");
            textarea.value = base64;
            document.body.appendChild(textarea);
            textarea.select();
            document.execCommand("copy");
            document.body.removeChild(textarea);
            alert(`å·²å¤åˆ¶ ${name} çš„Base64ç¼–ç åˆ°å‰ªè´´æ¿`);
          });
      }

      function formatBytes(bytes) {
        if (bytes < 1024) return bytes + " B";
        if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(2) + " KB";
        return (bytes / (1024 * 1024)).toFixed(2) + " MB";
      }

      window.copyBase64 = copyBase64;
    </script>
  </body>
</html>
